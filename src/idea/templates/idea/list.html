{% extends "idea/idea-base.html" %}

{% block "content" %}

        <div id="content" class="idea-home ic" role="main">
            <div class="left span9">
                <section id="idea-hero" class="idea-hero">
                    <header class="project-header">
                        <div class="row">
                            <div class="logo span5">
                                <h2 class="section">
                                    <a href="{% url 'idea:idea_list' %}">Idea Box</a>
                                </h2>
                            </div>
                            <p class="info">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                                consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                                cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                                proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                            </p>
                        </div><!-- /row -->
                    </header><!-- /project-header -->
                    <div class="visuallyhidden">
                        <h2>Main Navigation for Idea Box</h2>
                    </div> <!-- /visuallyhidden -->
                    <ul class="section-nav">
                            <li {% if sort_or_state == 'trending' %}class="active"{% endif %}><a href="{% url 'idea:idea_list' "trending" %}">Trending</a></li>
                            <li {% if sort_or_state == 'vote' %}class="active"{% endif %}><a href="{% url 'idea:idea_list' "vote" %}">Likes</a></li>
                            <li {% if sort_or_state == 'recent' %}class="active"{% endif %}><a href="{% url 'idea:idea_list' "recent" %}">Recent</a></li>
                    </ul><!-- /nav -->
                </section><!-- /idea-hero -->
            </div><!-- /left -->
            <div class="left span12">
            <div class="left span9">
                <section id="main" class="main-content">
                {% if ideas %}
                {% for idea in ideas %}
                        <article class="idea-entry">
                        <div class="row">
                            <div class="idea-votes left">
                                <div class="count">{{idea.vote_count}}</div>
                                <div class="phrase">Like{{idea.vote_count|pluralize:",s"}}</div>
                                <div class="action">
                                {% if idea.state.name == 'Archive' %}
                                    <span class="btn-archive">Archived</span>
                                {% elif request.user in idea.voters.all %}
                                    <span class="btn btn-voted">Liked</span>
                                {% else %}
                                    <form action="{% url 'idea:upvote_idea' %}" method=POST>
                                        {% csrf_token %}
                                        <input type="hidden" name="idea_id" value="{{idea.id}}"/>
                                        <input type="hidden" name="next" value="{% url 'idea:idea_list' %}"/>
                                        <input type="submit" class="btn btn-vote" value="Like" id="vote_up"/>
                                    </form>
                                {% endif %}
                                </div>
                            </div><!-- /idea-votes -->
                            <div class="idea-wrap span10">
                                <header class="idea-title">
                                    <a href="{% url 'idea:idea_detail' idea.id %}"><h2>{{idea.title}}</h2></a>
                                </header>
                                <div class="idea-description">
                                    {{ idea.summary|truncatechars:250 }}
                                    <span class="idea-more">
                                        &nbsp;<a href="{% url 'idea:idea_detail' idea.id %}">Read More &#xf054</a>
                                    </span>
                                </div>
                                <footer class="idea-footer">
                                    <div class="idea-info">
                                        <span class="commented"><a href="{% url 'idea:idea_detail' idea.id %}#comments">{{idea.comment_count}} Comment{{idea.comment_count|pluralize:",s"}}</a></span> | <span class="suggested">Suggested on {{idea.time|date:"M d, Y"}}</span>
                                    </div><!-- /idea-info -->
                                </footer>
                            </div><!-- /idea-wrap -->
                        </div><!-- /row -->
                    </article>
                {% endfor %}
                {% else %}
                    <article class="no-results">
                        <div class="row">
                            <p class="span9">There are no ideas to display.</p>
                        </div><!-- /row -->
                    </article><!-- /no-results -->
                {% endif %}
                    <nav id="bottom-nav" class="bottom-internal-nav span12" role="navigation">
                    <h4 class="visuallyhidden">Idea Post Navigation</h4>
                    {% if ideas.has_previous %}
                        <a href="?page_num={{ideas.previous_page_number}}" class="left">Previous Ideas</a>
                    {% endif %}
                    {% if ideas.has_next %}
                        <a href="?page_num={{ideas.next_page_number}}" class="more">More Ideas</a>
                    {% endif %}
                    </nav><!-- /bottom-nav /bottom-internal-nav -->
                </section><!-- /main /main-content -->
            </div><!-- /row -->
                <div class="sidebar left span3">
                    <div class="project-add-idea">
                        <a href="{% url 'idea:add_idea' %}" class="btn-huge">Submit an idea</a>
                    </div><!-- /project-add-idea -->
                    {% if banner %}
                    <div class="challenge-banner">
                        <h5>Current Challenge:</h5>
                        <h3 class="challenge-description">{{banner.title}}</h3>
                        <div id="challenge-link"><a href="{% url 'idea:banner_detail' banner.id %}">View Challenge ideas</a></div>
                    </div><!-- /challenge-banner -->
                    {% endif %}
                    <aside class="tags">
                        <h4>Browse by Tag:</h4>
                        <ul>
                               {% for tag in tags %}
                               <li class="tag"><a class="tag_name" href="{{tag.tag_url}}" 
                                   {% if tag.active %}
                                       class="active"
                                   {% endif %}
                               >{{tag}} </a><span class="tag_remove">{{tag.count}}</span></li>
                               {% endfor %}
                        </ul>   
                    </aside>
                </div><!-- /span_side -->
            </div><!-- /row -->
        </div><!-- /main -->

{% endblock %}

{% block "js_scripts" %}
        <script src="{{ STATIC_URL }}idea/js/functions.js"></script>
{% block "design_js_scripts" %}{% endblock %}
{% endblock %}
